---
layout: page
title: Journal
permalink: /journal/
nav: journal
---

<div class="journal-layout">

  <!-- LEFT: collapsible archive -->
  <aside class="journal-archive" id="journal-archive">
    <h3 style="margin:0 0 8px 4px;">Archive</h3>
    {% assign posts_sorted = site.posts | sort: "date" | reverse %}
    {% assign grouped = posts_sorted | group_by_exp: "post", "post.date | date: '%B %Y'" %}

    {% for month in grouped %}
      <div class="arch-month" data-target="m{{ forloop.index }}">
        <span>{{ month.name }}</span>
        <span class="arch-caret">▶</span>
      </div>
      <ul class="arch-list" id="m{{ forloop.index }}">
        {% for post in month.items %}
          <li>
            <a href="{{ post.url | relative_url }}">{{ post.title }}</a>
            <small style="opacity:.75"> — {{ post.date | date: "%Y-%m-%d" }}</small>
          </li>
        {% endfor %}
      </ul>
    {% endfor %}
  </aside>

  <!-- RIGHT: your main content -->
  <section class="journal-content">
    <p>Thoughts and notes. Use the archive on the left to open a month.</p>

    {% assign latest = site.posts | sort: "date" | last %}
    {% if latest %}
      <p>
        <a href="{{ latest.url | relative_url }}"><strong>Latest entry:</strong> {{ latest.title }}</a>
        <small>— {{ latest.date | date: "%Y-%m-%d" }}</small>
      </p>
    {% endif %}
  </section>
</div>

<!-- Toggle script -->
<script>
  document.addEventListener('DOMContentLoaded', function () {
    document.querySelectorAll('.arch-month').forEach(function (row) {
      row.addEventListener('click', function () {
        row.classList.toggle('open');
        const list = document.getElementById(row.getAttribute('data-target'));
        if (list) list.style.display = row.classList.contains('open') ? 'block' : 'none';
      });
    });
    // Open first month by default
    const first = document.querySelector('.arch-month');
    if (first) first.click();
  });
</script>
